<!DOCTYPE html>
<html>
	<head>
	</head>
	<body>
	<script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script> 
	<!--颜色  select 、selectall 都有个transition-->
	<script>
		var svg=d3.select('body')
				.append('svg')
				.attr("height",400)
				.attr("width",400);
		var rect=svg.append('rect')
			.attr('fill','steelblue')
			.attr('x',10)
			.attr('y',10)
			.attr('width',100)
			.attr('height',30);
		console.log(rect);
		var text=svg.append('text')
				.attr('fill','white')
				.attr("x",100)
				.attr("y",10)
				.attr("dy",'1.2em')
				.attr("text-anchor",'end')
				.text(100);
		var initx=text.attr("x");
		var initText=text.text();
		//过渡对象没有data与datum方法来绑定新数据的
		var rectTran=rect.transition()//可连续使用
			.delay(1000)
			.duration(3000)
			//.ease('bounce')//过渡样式,弹几下，
			//.attr('width',300)//目标属性
			.attrTween('width',function(d,i,a){return function(t){return Number(a)+t*200}});
			//.tween('rect',function(d,i,a){return function(t){d3.select(this).attr('width',Number(a)+t*200)}});//该方法错的
			//.transition()
			//.attr('height',100)
			//.style('fill','red');
		var rectTran=text.transition()//可连续使用
			.delay(1000)
			.duration(3000)
			//.ease('bounce')//过渡样式,弹几下，
			//.attr('width',300)//目标属性
			//.attrTween('width',function(d,i,a){return function(t){return Number(a)+t*200}})
			.tween('text',function(d,i,a){
					return function(t){
						d3.select(this)
							.attr("x",Number(initx)+t*200)
							.text(Math.floor(Number(initText)+t*200));
					}
			})
			.remove();
		console.log(rectTran);		
		
	</script> 
	<script>
		var svg=d3.select('body')
					.append('svg')
					.attr('height',400)
					.attr('width',400);
		var dataset=[100,100,100];
		
		var g=svg.append('g');
		
		var rects=g.selectAll('rect')
					.data(dataset)
					.enter()
					.append('rect')
					.attr('fill','black')
					.attr('id',function(d,i){return 'rect'+i})
					.attr('x',10)
					.attr('y',function(d,i){return 10+i*35})
					.attr('height',30)
					.attr('width',function(d,i){return d});
		var trans=g.transition()
					//.select('#rect2')//1.选择特定的元素过渡
					.selectAll('rect')//2.选择所有的元素过渡
					.filter(function(d,i){return i>=1;})//3.在selectAll下过滤元素
					.delay(1000)
					.attrTween('width',function(d,i,a){return function(t){return Number(a)+t*200 }});
	</script> 
	</body>
</html>